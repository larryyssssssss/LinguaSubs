# LinguaSubs 变更日志

## [v1.3.0] - 2025-09-08

### 新增功能
- **体验优化**: 
  - 根据新版优化建议完成所有体验打磨任务
  - 实现信息架构优化，统一导航入口并美化返回按钮
  - 完善API缓存机制，提升应用性能
- **交互改进**: 
  - 优化复习模式交互，移除翻转按钮直接展示答案
  - 实现中文释义功能，支持中英翻译
  - 增强发音功能，添加语音加载检查与重试机制
- **学习体验**: 
  - 实现复习队列随机化，使用Fisher-Yates算法打乱单词顺序
  - 修复首页进度展示逻辑，准确反映学习进度

### 改进功能
- **UI/UX优化**: 
  - 美化返回按钮样式，提升视觉一致性
  - 简化复习模式交互流程，降低操作摩擦
  - 优化进度展示逻辑，确保准确反映学习状态

### 修复问题
- **功能完整性**: 
  - 修复单词发音功能无声问题
  - 完善复习队列随机化逻辑
  - 优化首页进度展示准确性

## [v1.2.9] - 2025-09-08

### 新增功能
- **架构重构**: 
  - 完成数据服务层重构，将所有Supabase交互逻辑封装到[dataService.js](file:///Users/tantan/code/LinguaSubs/js/dataService.js)
  - 实现统一的路由管理，解耦路由与状态管理
  - 完善用户上传流程闭环，支持完整的上传、编辑、删除功能
- **性能优化**: 
  - 重构API缓存机制，确保LRU缓存被正确使用
  - 实现智能预取功能，提升单词切换体验
  - 优化学习进度可视化，添加进度条和统计信息

### 改进功能
- **UI/UX优化**: 
  - 优化响应式设计，改进移动端体验
  - 美化学习界面，添加圆形进度环
  - 优化上传模态框UI
- **代码质量**: 
  - 为所有核心函数添加JSDoc注释
  - 确保所有JS文件使用ES模块
  - 统一加载状态管理

### 修复问题
- **功能完整性**: 
  - 修复用户上传流程中的各种问题
  - 完善学习进度同步机制
  - 优化错误处理和用户提示

## [v1.2.8] - 2025-09-07

### 新增功能
- **设计规范系统**: 
  - 实现完整的CSS变量系统，包括颜色、间距、圆角、阴影、字体等设计规范
  - 建立并应用设计规范，将色彩、间距、圆角等变量化并统一应用
  - 完成所有根据优化建议文档提出的任务，包括Supabase后端架构升级、数据层重构、云存储实现、前端路由与状态管理、全局控件、闪卡学习流优化、学习进度可视化、单词点击交互、A11y基线建立等

### 改进功能
- **视觉设计优化**: 
  - 使用设计规范变量统一应用到整个项目中
  - 强化了信息层级，优化了字体大小和粗细
  - 改进了颜色方案，为不同熟练度添加了视觉标识
  - 优化了间距和布局设计

## [v1.2.7] - 2025-09-07

### 新增功能
- **用户体系**: 
  - 实现基于设备ID的用户体系，自动生成并保存用户ID
  - 在首页显示用户ID，并支持点击复制功能
- **中文翻译支持**: 
  - 改进词典API集成，添加中文翻译功能
  - 优化API查询逻辑，即使查不到单词也返回基本数据而非null

### 改进功能
- **发音按钮优化**: 
  - 发音按钮现在始终可用，即使没有音频也允许点击
  - 添加播放失败时的用户反馈提示
- **缓存管理**: 
  - 增强LRU缓存功能，添加删除特定项和清空缓存的方法
  - 在首页添加清除缓存按钮，方便用户手动刷新数据
- **UI/UX优化**: 
  - 调整返回首页按钮样式，使其更显眼
  - 根据用户是否上传文件动态调整示例模块位置
  - 所有单词现在都显示发音按钮

### 修复问题
- **模块导入错误**: 
  - 修复[main.js](file:///Users/tantan/code/LinguaSubs/js/main.js)中[getWordDetails](file:///Users/tantan/code/LinguaSubs/js/api.js#L109-L131)函数未正确导入的问题
- **API查询问题**: 
  - 修复词典API查不到单词时整个功能失效的问题
  - 添加备用API查询机制，提高查询成功率

## [v1.2.6] - 2025-09-07

### 修复问题
- **示例影片显示问题**: 
  - 修复了电影海报图片URL字段名不匹配问题，正确处理`poster_url`字段
  - 修复了电影字幕文件路径字段名不匹配问题，正确处理`subtitle_url`和`srt_path`字段
  - 优化了图片加载失败时的处理逻辑，使用本地SVG数据URL替代网络图片，避免加载失败循环

## [v1.2.5] - 2025-09-07

### 修复问题
- **模块导出错误**: 
  - 修复了[srs.js](file:///Users/tantan/code/LinguaSubs/js/srs.js)文件中缺少函数导出的问题，正确导出[calculateNextReview](file:///Users/tantan/code/LinguaSubs/js/srs.js#L47-L70)和[getNextWord](file:///Users/tantan/code/LinguaSubs/js/srs.js#L79-L104)函数
  - 修复了数据库表结构，添加了[proficiency](file:///Users/tantan/code/LinguaSubs/js/stateManager.js#L5-L27)字段以支持单词熟练度功能

## [v1.2.4] - 2025-09-07

### 修复问题
- **函数重复导入错误**: 
  - 修复了[main.js](file:///Users/tantan/code/LinguaSubs/js/main.js)中[prefetchWordDetails](file:///Users/tantan/code/LinguaSubs/js/api.js#L133-L174)函数被重复导入的问题
  - 确保所有ES6模块导入不重复，避免Identifier重复声明错误

## [v1.2.3] - 2025-09-07

### 修复问题
- **模块加载错误**: 
  - 修复了[data.js](file:///Users/tantan/code/LinguaSubs/js/data.js)文件模块加载问题，正确添加type="module"属性
  - 修复了[handleFeedback](file:///Users/tantan/code/LinguaSubs/js/main.js#L718-L745)函数中[appState](file:///Users/tantan/code/LinguaSubs/js/stateManager.js#L5-L27)未导入的问题
  - 优化了数据库查询错误处理，避免因字段不存在导致的错误

## [v1.2.2] - 2025-09-07

### 修复问题
- **示例影片访问错误**: 
  - 修复了示例影片ID格式不兼容Supabase的问题，使用UUID格式ID
  - 修复了[stateManager.js](file:///Users/tantan/code/LinguaSubs/js/stateManager.js)中[getWordDetails](file:///Users/tantan/code/LinguaSubs/js/api.js#L109-L131)函数未导入的问题
  - 优化了电影列表渲染逻辑，增加对UUID格式的检查

## [v1.2.1] - 2025-09-07

### 改进功能
- **首页布局调整**: 
  - 将示例影片区域移至页面顶部
  - 将上传字幕功能移至页面底部
  - 优化了首页信息层级结构

## [v1.2.0] - 2025-09-07

### 新增功能
- **个人媒体库**: 用户现在可以上传自己的SRT字幕文件并保存学习进度
- **导出功能**: 支持将单词列表导出为CSV格式文件
- **加载指示器**: 添加了加载状态指示器，提升用户体验
- **键盘快捷键**: 实现了完整的键盘快捷键支持
- **快捷键帮助面板**: 添加了快捷键帮助面板，方便用户查看
- **移动端优化**: 改进了移动端用户体验，添加了面板切换功能

### 改进功能
- **视觉设计优化**: 
  - 强化了信息层级，优化了字体大小和粗细
  - 改进了颜色方案，为不同熟练度添加了视觉标识
  - 优化了间距和布局设计
- **设置面板**: 
  - 完善了设置面板功能
  - 添加了词频过滤、熟练度标签自定义等功能
- **用户体验**: 
  - 添加了消息提示系统
  - 优化了错误处理
  - 改进了响应式设计

### 技术优化
- **性能优化**: 
  - 实现了API缓存机制
  - 添加了预加载技术
  - 优化了状态管理
- **代码结构**: 
  - 重构了部分JavaScript代码
  - 优化了CSS样式组织

## [v1.1.0] - 2025-09-06

### 新增功能
- **SRS复习模式**: 实现了基于间隔重复算法的智能复习系统
- **熟练度标记**: 添加了单词熟练度标记功能
- **词典API集成**: 集成了Free Dictionary API获取单词详细信息
- **设置面板**: 实现了基本设置功能

### 改进功能
- **UI优化**: 
  - 优化了视觉设计和信息层级
  - 改进了按钮和面板样式
- **交互优化**: 
  - 优化了单词详情展示
  - 改进了熟练度标记交互

## [v1.0.0] - 2025-09-05

### 核心功能
- **项目初始化**: 搭建了LinguaSubs基础项目结构
- **SRT解析**: 实现了SRT字幕文件解析功能
- **词汇提取**: 完成了核心词汇提取算法
- **学习界面**: 实现了基本的学习界面和交互功能